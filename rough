import requests
from azure.identity import ClientSecretCredential
import os

endpoint = "https://azureai-nprd-weu-openai-ai27.openai.azure.com"
tenant = os.getenv("AZURE_TENANT_ID")
cid = os.getenv("AZURE_CLIENT_ID")
secret = os.getenv("AZURE_CLIENT_SECRET")

cred = ClientSecretCredential(tenant_id=tenant, client_id=cid, client_secret=secret)
token = cred.get_token("https://cognitiveservices.azure.com/.default")

url = endpoint.rstrip("/") + "/.well-known/aiapi-versions"
resp = requests.get(url, headers={"Authorization": f"Bearer {token.token}"}, timeout=10)
print("STATUS:", resp.status_code)
print("BODY:", resp.text[:800])
